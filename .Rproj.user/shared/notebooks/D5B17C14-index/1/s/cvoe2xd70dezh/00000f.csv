"0",""
"0","df %>%"
"0","  filter(!is.na(CPAL.JOB.008)) %>%"
"0","  mutate(CPAL.JOB.008 = case_when("
"0","    CPAL.JOB.008 == 1 ~ ""Working (either full- or part-time)"","
"0","    CPAL.JOB.008 == 2 ~ ""Unemployed or laid off"","
"0","    CPAL.JOB.008 == 3 ~ ""Temporarily out of work or furloughed"","
"0","    CPAL.JOB.008 == 4 ~ ""Other"","
"0","    CPAL.JOB.008 == 5 ~ ""Stay-at-home parent (not seeking work)"","
"0","    CPAL.JOB.008 == 6 ~ ""Student (either working or not working)"""
"0","  )) %>%"
"0","  group_by(CPAL.JOB.008) %>%"
"0","  tally() %>%"
"0","  mutate(prop = n/sum(n)) %>%"
"0","  ggplot(aes(x = """", y = prop, fill = CPAL.JOB.008)) +"
"0","  geom_bar(width = 1, stat = ""identity"") +"
"0","  coord_polar(theta = ""y"", start = 0) +"
"0","  geom_text(aes(x=1.05, label = ifelse(prop > 0.1, scales::percent(prop * 100, scale = 1, accuracy = 0.1), """")), "
"0","            position = position_stack(vjust = 0.5), colour = ""white"", size = 8) +"
"0","  labs(fill = """") +"
"0","  theme_minimal() +"
"0","  theme("
"0","    legend.position = ""left"","
"0","    legend.key.size = unit(2, ""lines""), "
"0","    legend.text = element_text(size = 12),"
"0","    axis.text = element_blank(),"
"0","    axis.ticks = element_blank(),"
"0","    axis.title = element_blank(),"
"0","    panel.grid = element_blank(),"
"0","    plot.background = element_rect(fill = ""transparent"", colour = NA),"
"0","    panel.background = element_rect(fill = ""transparent"", colour = NA),"
"0","    strip.background = element_rect(fill = ""transparent"", colour = NA)"
"0","  ) +"
"0","  scale_fill_manual(values = c(""Working (either full- or part-time)"" = palette_cpal_main[1], "
"0","                               ""Unemployed or laid off"" = palette_cpal_main[2], "
"0","                               ""Temporarily out of work or furloughed"" = ""#b0663e"","
"0","                               ""Student (either working or not working)"" = ""#4c8a4a"","
"0","                               ""Stay-at-home parent (not seeking work)"" = palette_cpal_main[4],"
"0","                               ""Other"" = ""#ababab""),"
"0","                    breaks = c(""Working (either full- or part-time)"","
"0","                               ""Unemployed or laid off"","
"0","                               ""Temporarily out of work or furloughed"", "
"0","                               ""Stay-at-home parent (not seeking work)"","
"0","                               ""Student (either working or not working)"","
"0","                               ""Other"")"
"0","                    )"
"0",""
